<aside
  class="sidebar"
  [class.sidebar--closed]="!isOpen() && !isMobileOpen()"
  [class.sidebar--mobile-open]="isMobileOpen()"
>
  <!-- Brand/Logo Header -->
  <div class="sidebar__header">
    <div class="sidebar__brand">
      <div class="sidebar__brand-logo">
        <img
          src="/assets/esther-logo.png"
          alt="Ester Logo"
          class="sidebar__logo-img"
        />
      </div>
      <div class="sidebar__brand-text">
        <h6 class="sidebar__brand-name">Ester</h6>
        <small class="sidebar__brand-subtitle"
          > </small
        >
      </div>
    </div>

    <!-- Toggle Button -->
    @if (!isMobile() || isMobileOpen()) {
    <button
      class="sidebar__toggle"
      (click)="isMobile() ? closeMobileMenu() : toggleSidebar()"
      type="button"
      [attr.aria-label]="isMobile() ? 'Cerrar menÃº' : 'Cerrar sidebar'"
    >
      @if (isMobile()) {
      <!-- X para mobile -->
      <lucide-icon [img]="icons.ChevronLeft" [size]="20"></lucide-icon>
      } @else {
      <!-- ChevronLeft para desktop -->
      <lucide-icon [img]="icons.ChevronLeft" [size]="20"></lucide-icon>
      }
    </button>
    }
  </div>

  <!-- Navigation Menu -->
  <nav class="sidebar__nav">
    <ul class="sidebar__menu">
      @for (item of menuItems(); track item.route) {
      <li class="sidebar__menu-item">
        <a
          [routerLink]="item.route"
          routerLinkActive="sidebar__menu-link--active"
          class="sidebar__menu-link"
          (click)="onLinkClick()"
        >
          <lucide-icon
            [img]="item.icon"
            [size]="18"
            class="sidebar__menu-icon"
          ></lucide-icon>
          <span class="sidebar__menu-label">{{ item.label }}</span>
          @if (item.badge) {
          <span class="sidebar__menu-badge">{{ item.badge }}</span>
          }
        </a>
      </li>
      }
    </ul>
  </nav>

  <!-- Footer -->
  <div class="sidebar__footer">
    <div class="sidebar__footer-content">
      <lucide-icon
        [img]="icons.Info"
        [size]="14"
        class="sidebar__footer-icon"
      ></lucide-icon>
      <small class="sidebar__footer-text">V {{ version }}</small>
    </div>
  </div>
</aside>

<!-- Mobile overlay (backdrop) -->
@if (isMobileOpen()) {
<div class="sidebar__overlay" (click)="closeMobileMenu()"></div>
}
